const wax=new waxjs.WaxJS({rpcEndpoint:"https://wax.greymass.com"});let transactionHash=null;async function autoLogin(){var t;await wax.isAutoLoginAvailable()?(t="AutoLogin enabled for account: "+wax.userAccount+"<br/>Active: "+(t=wax.pubKeys)[0]+"<br/>Owner: "+t[1],document.getElementById("autologin").insertAdjacentHTML("beforeend",t)):document.getElementById("autologin").insertAdjacentHTML("beforeend","Not auto-logged in")}async function login(){if(!wax.api)try{var t=await wax.login(),e=wax.pubKeys,n="Account: "+t+"<br/>Active: "+e[0]+"<br/>Owner: "+e[1];document.getElementById("loginresponse").innerHTML=n}catch(t){document.getElementById("loginresponse").innerHTML=t.message}}async function sign(){if(!wax.api)return document.getElementById("response").append("* Login first *");var t=wax.userAccount;try{var e=await wax.api.transact({actions:[{account:"eosio.token",name:"transfer",authorization:[{actor:wax.userAccount,permission:"active"}],data:{from:wax.userAccount,to:"rizzlesizzle",quantity:"0.00000001 WAX",memo:"transact:"+t}}]},{blocksBehind:3,expireSeconds:30});transactionHash=e.transaction_id,document.getElementById("transactionHash").textContent=transactionHash,document.getElementById("response").textContent=JSON.stringify(e,null,2),await validateTransaction(transactionHash,wax.userAccount),document.getElementById("validationResult").textContent=e.message}catch(t){document.getElementById("response").textContent=t.message}}async function logout(){wax.api?(wax.logout(),document.getElementById("response").textContent=" logged out from wax network",document.getElementById("autologin").textContent="",document.getElementById("loginresponse").textContent=""):document.getElementById("response").append("* Login first *")}async function validateTransaction(t,e){try{var n,o=await fetch("http://localhost:8080/verifyTransaction",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transactionHash:t,userAccount:e})});if(!o.ok)throw n=await o.json(),new Error(n.error);var a=await o.json();document.getElementById("validationResult").textContent=a.message}catch(t){document.getElementById("validationResult").textContent="Error: "+t.message,console.error("Error:",t)}}autoLogin();